<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ | Taxi Pro</title>
    <link rel="stylesheet" href="admin-styles.css?v=3.5.1">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="admin-container">
        <header>
            <div class="header-main">
                <h1>üöñ Taxi Pro Admin</h1>
                <div id="maintenance-control" style="display: none;">
                    <label class="switch">
                        <input type="checkbox" id="maintenance-toggle" onchange="toggleMaintenance(this.checked)">
                        <span class="slider round"></span>
                    </label>
                    <span class="m-label">üîß –¢–µ—Ö—Ä–∞–±–æ—Ç—ã</span>
                </div>
            </div>
            <div id="login-section">
                <input type="password" id="admin-pass" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞">
                <button onclick="login()">–í–æ–π—Ç–∏</button>
            </div>
            <div id="admin-info" style="display: none;">
                <div id="debug-status"
                    style="display: inline-block; margin-right: 15px; font-size: 11px; vertical-align: middle; padding: 5px 10px; background: rgba(0,0,0,0.2); border-radius: 5px;">
                    üë• <span id="debug-users" title="–ò–≥—Ä–æ–∫–æ–≤ –≤ –±–∞–∑–µ">-</span> |
                    ü§ñ <span id="debug-bot" title="–°—Ç–∞—Ç—É—Å —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞">-</span>
                </div>
                <span id="status-badge">‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</span>
                <button onclick="exportDB()" style="margin-right:10px; background:#4a4a4a;">üíæ –≠–∫—Å–ø–æ—Ä—Ç –ë–î</button>
                <button onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
        </header>

        <main id="main-content" style="display: none;">
            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <nav class="admin-tabs">
                <button class="tab-link active" onclick="openTab(event, 'tab-dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
                <button class="tab-link" onclick="openTab(event, 'tab-users')">üë• –ò–≥—Ä–æ–∫–∏</button>
                <button class="tab-link" onclick="openTab(event, 'tab-jackpot')">üé∞ –î–∂–µ–∫–ø–æ—Ç</button>
                <button class="tab-link" onclick="openTab(event, 'tab-promo')">üé´ –ü—Ä–æ–º–æ–∫–æ–¥—ã</button>
                <button class="tab-link" onclick="openTab(event, 'tab-announcement')">üì¢ –û–±—ä—è–≤–ª–µ–Ω–∏—è</button>
                <button class="tab-link" onclick="openTab(event, 'tab-containers')">üì¶ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã</button>
                <button class="tab-link" onclick="openTab(event, 'tab-cars-editor')">üöó –ú–∞—à–∏–Ω—ã</button>
                <button class="tab-link" onclick="openTab(event, 'tab-settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                <button class="tab-link" onclick="openTab(event, 'tab-logs')">üö® –û—à–∏–±–∫–∏</button>
                <button class="tab-link" onclick="openTab(event, 'tab-plates')">üÜî –ù–æ–º–µ—Ä–∞</button>
                <button class="tab-link" onclick="openTab(event, 'tab-activities')">üõ°Ô∏è –ê–Ω—Ç–∏-—á–∏—Ç</button>
                <button class="tab-link" onclick="openTab(event, 'tab-support')">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</button>
            </nav>

            <!-- –í–∫–ª–∞–¥–∫–∞: –î–∞—à–±–æ—Ä–¥ -->
            <div id="tab-dashboard" class="tab-content active">
                <section class="stats-grid">
                    <div class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</h3>
                        <div id="total-users" class="stat-value">-</div>
                    </div>
                    <div id="total-earned-card" class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</h3>
                        <div id="total-earned" class="stat-value">-</div>
                    </div>
                    <div id="total-rides-card" class="stat-card">
                        <h3>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</h3>
                        <div id="total-rides" class="stat-value">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>–ë–∞–ª–∞–Ω—Å –≤ –æ–±–æ—Ä–æ—Ç–µ</h3>
                        <div id="total-balance" class="stat-value">-</div>
                    </div>
                    <div class="stat-card">
                        <h3>DAU / WAU</h3>
                        <div id="stats-retention" class="stat-value">0 / 0</div>
                    </div>
                </section>

                <section class="charts-container">
                    <div class="chart-box">
                        <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (14 –¥–Ω–µ–π)</h3>
                        <canvas id="regChart"></canvas>
                    </div>
                    <div class="chart-box">
                        <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–ü–æ–µ–∑–¥–∫–∏)</h3>
                        <canvas id="ridesChart"></canvas>
                    </div>
                    <div class="chart-box">
                        <h3>–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å —Ä–∞–π–æ–Ω–æ–≤</h3>
                        <canvas id="districtChart"></canvas>
                    </div>
                </section>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ò–≥—Ä–æ–∫–∏ -->
            <div id="tab-users" class="tab-content">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                    <button onclick="loadUsers()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div class="table-container">
                    <table id="user-table">
                        <thead>
                            <tr>
                                <th>Telegram ID</th>
                                <th>–£—Ä–æ–≤–µ–Ω—å</th>
                                <th>–ë–∞–ª–∞–Ω—Å (PLN)</th>
                                <th>–¢–æ–ø–ª–∏–≤–æ</th>
                                <th>–°—Ç–∞–º–∏–Ω–∞</th>
                                <th>–ó–∞–∫–∞–∑—ã</th>
                                <th>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="user-tbody">
                            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å—é–¥–∞ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ü—Ä–æ–º–æ–∫–æ–¥—ã -->
            <div id="tab-promo" class="tab-content">
                <div class="promo-actions">
                    <section class="add-promo-card">
                        <h3>–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</h3>
                        <form id="promo-form">
                            <input type="text" id="promo-code" placeholder="CODE2024" required>
                            <input type="number" id="promo-balance" placeholder="–ù–∞–≥—Ä–∞–¥–∞ (PLN)">
                            <div class="lootbox-inputs small">
                                <input type="number" id="promo-lb-wooden" placeholder="W">
                                <input type="number" id="promo-lb-silver" placeholder="S">
                                <input type="number" id="promo-lb-gold" placeholder="G">
                                <input type="number" id="promo-lb-legendary" placeholder="L">
                            </div>
                            <input type="number" id="promo-max-uses" placeholder="–õ–∏–º–∏—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–π">
                            <input type="date" id="promo-expiry">
                            <button type="submit">–°–æ–∑–¥–∞—Ç—å</button>
                        </form>
                    </section>
                </div>
                <div class="promo-list">
                    <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>–ö–æ–¥</th>
                                    <th>–ù–∞–≥—Ä–∞–¥–∞</th>
                                    <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</th>
                                    <th>–õ–∏–º–∏—Ç</th>
                                    <th>–ò—Å—Ç–µ–∫–∞–µ—Ç</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="promo-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –û–±—ä—è–≤–ª–µ–Ω–∏—è -->
            <div id="tab-announcement" class="tab-content">
                <div class="promo-actions">
                    <section class="add-promo-card">
                        <h3>–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h3>
                        <form id="announcement-form">
                            <input type="text" id="ann-title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ë–æ–Ω—É—Å!)" required>
                            <textarea id="ann-message" placeholder="–¢–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è..." required rows="4"
                                style="width: 100%; margin-bottom: 15px; border-radius: 8px; padding: 10px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1); font-family: inherit; font-size: 14px;"></textarea>
                            <select id="ann-type"
                                style="width: 100%; margin-bottom: 15px; border-radius: 8px; padding: 10px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                <option value="info">üîµ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</option>
                                <option value="success">üü¢ –£—Å–ø–µ—Ö / –ë–æ–Ω—É—Å</option>
                                <option value="warning">üü° –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</option>
                                <option value="error">üî¥ –í–∞–∂–Ω–æ–µ / –°—Ä–æ—á–Ω–æ–µ</option>
                            </select>
                            <div style="display: flex; gap: 10px;">
                                <button type="submit" style="flex: 2;">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                                <button type="button" onclick="clearAnnouncement()" class="danger-btn"
                                    style="flex: 1;">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </form>
                    </section>
                </div>

                <div class="promo-list">
                    <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–∫–∞–∫ —É–≤–∏–¥–∏—Ç –∏–≥—Ä–æ–∫)</h3>
                    <div id="ann-preview"
                        style="padding: 20px; border-radius: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                        <div id="preview-box"
                            style="padding: 15px; border-radius: 10px; border-left: 5px solid #0088cc; background: rgba(0,0,0,0.2);">
                            <h4 id="preview-title" style="margin: 0 0 5px 0; color: #fff;">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h4>
                            <p id="preview-message" style="margin: 0; opacity: 0.8; line-height: 1.4;">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
                                –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å...</p>
                        </div>
                    </div>
                </div>

                <div class="promo-actions" style="margin-top: 20px;">
                    <section class="add-promo-card"
                        style="background: linear-gradient(135deg, #0088cc 0%, #005588 100%);">
                        <h3>üì§ Telegram –†–∞—Å—Å—ã–ª–∫–∞ (Broadcast)</h3>
                        <p style="font-size: 12px; opacity: 0.8; margin-bottom: 15px;">–≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–¥–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –≤
                            Telegram –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–æ—Ç–∞.</p>
                        <form id="broadcast-form">
                            <textarea id="broadcast-message" placeholder="–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤..." required
                                rows="4"
                                style="width: 100%; margin-bottom: 15px; border-radius: 8px; padding: 10px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); font-family: inherit; font-size: 14px;"></textarea>
                            <button type="submit" class="danger-btn"
                                style="width: 100%; background: #fff; color: #0088cc;">üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º
                                (Telegram)</button>
                        </form>
                    </section>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –î–∂–µ–∫–ø–æ—Ç –∏ –ê–≤—Ç–æ–ø–∞—Ä–∫ -->
            <div id="tab-jackpot" class="tab-content">
                <div class="promo-actions">
                    <section class="add-promo-card">
                        <h3>üé∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç–æ–º</h3>
                        <div class="stats-grid" style="margin-bottom: 20px;">
                            <div class="stat-card">
                                <h3>–¢–µ–∫—É—â–∏–π –ø—É–ª</h3>
                                <div id="jackpot-pool" class="stat-value" style="color: #f39c12;">0 PLN</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—É–º–º—É –ø—É–ª–∞:</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" id="jackpot-amount" placeholder="–°—É–º–º–∞ PLN" step="0.01"
                                    style="flex:2;">
                                <button onclick="setJackpotPool()" style="flex:1;">üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top: 15px;">
                            <label>–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –¥–∂–µ–∫–ø–æ—Ç–∞:</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="jackpot-user-id" placeholder="Telegram ID –ø–æ–±–µ–¥–∏—Ç–µ–ª—è"
                                    style="flex:2;">
                                <button onclick="forceJackpot()" class="danger-btn" style="flex:1;">üé∞ –í—ã–¥–∞—Ç—å!</button>
                            </div>
                        </div>
                        <div id="jackpot-history" style="margin-top: 15px;"></div>
                    </section>

                    <section class="add-promo-card">
                        <h3>üöó –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ –≤ –∞–≤—Ç–æ–ø–∞—Ä–∫</h3>
                        <div class="form-group">
                            <label>Telegram ID –∏–≥—Ä–æ–∫–∞:</label>
                            <input type="text" id="fleet-user-id" placeholder="Telegram ID">
                        </div>
                        <div class="form-group">
                            <label>–ú–∞—à–∏–Ω–∞:</label>
                            <select id="fleet-car-id"
                                style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);"></select>
                        </div>
                        <div class="form-group">
                            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                            <input type="number" id="fleet-car-count" value="1" min="1" max="100">
                        </div>
                        <button onclick="addFleetCar()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ –∞–≤—Ç–æ–ø–∞—Ä–∫</button>
                    </section>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã -->
            <div id="tab-containers" class="tab-content">
                <div class="promo-actions">
                    <section class="add-promo-card">
                        <h3>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É–∫—Ü–∏–æ–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤</h3>
                        <form id="container-admin-form">
                            <div class="form-group">
                                <label>–ù–∞–≥—Ä–∞–¥–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:</label>
                                <select id="admin-container-reward"
                                    style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.05); color: white; border: 1px solid rgba(255,255,255,0.1);">
                                    <option value="">üé≤ –°–ª—É—á–∞–π–Ω–æ–µ –∞–≤—Ç–æ (Random)</option>
                                    <!-- –ú–∞—à–∏–Ω—ã –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∏–∑ JS -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (PLN):</label>
                                <input type="number" id="admin-container-start-bid" value="5000">
                            </div>
                            <div class="form-group">
                                <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω):</label>
                                <input type="number" id="admin-container-duration" value="5">
                            </div>
                            <div class="form-group">
                                <label>–ò–Ω—Ç–µ—Ä–≤–∞–ª (–º–∏–Ω):</label>
                                <input type="number" id="admin-container-interval" value="10">
                            </div>
                            <button type="submit">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                        </form>
                    </section>

                    <section class="add-promo-card">
                        <h3>üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</h3>
                        <div id="admin-container-status-info" style="font-size: 14px; line-height: 1.6;">
                            <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ JS -->
                        </div>
                    </section>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ú–∞—à–∏–Ω—ã Editor -->
            <div id="tab-cars-editor" class="tab-content">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—à–∏–Ω–∞–º–∏ (–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)</h2>
                    <button onclick="loadCarDefinitions()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–¶–µ–Ω–∞ (PLN)</th>
                                <th>–†–∞—Å—Ö–æ–¥</th>
                                <th>–¢–∏–ø</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="cars-tbody"></tbody>
                    </table>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≠–∫–æ–Ω–æ–º–∏–∫–∏ -->
            <div id="tab-settings" class="tab-content">
                <div class="section-header">
                    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏ —Ü–µ–Ω</h2>
                </div>
                <div id="settings-list" class="stats-grid">
                    <!-- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ JS -->
                </div>

                <section class="add-promo-card" style="margin-top: 20px;">
                    <h3>üåê –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ On-line</h3>
                    <div class="form-group">
                        <label>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ–Ω–ª–∞–π–Ω (—Å–º–µ—â–µ–Ω–∏–µ):</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="online-offset-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 50" style="flex: 2;">
                            <button onclick="saveOnlineOffset()" style="flex: 1;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                        <p style="font-size: 12px; opacity: 0.6; margin-top: 10px;">–≠—Ç–æ —á–∏—Å–ª–æ –±—É–¥–µ—Ç –ø—Ä–∏–±–∞–≤–ª–µ–Ω–æ –∫
                            —Ä–µ–∞–ª—å–Ω–æ–º—É/—Å–ª—É—á–∞–π–Ω–æ–º—É –æ–Ω–ª–∞–π–Ω—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ.</p>
                    </div>
                </section>
            </div>
            <!-- –í–∫–ª–∞–¥–∫–∞: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
            <div id="tab-activities" class="tab-content">
                <div class="section-header">
                    <h2>–õ–æ–≥–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ê–Ω—Ç–∏-—á–∏—Ç)</h2>
                    <button onclick="loadActivities()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–ò–≥—Ä–æ–∫</th>
                                <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                                <th>–î–µ—Ç–∞–ª–∏</th>
                            </tr>
                        </thead>
                        <tbody id="activities-tbody"></tbody>
                    </table>
                </div>

                <section class="add-promo-card"
                    style="margin-top: 30px; border: 2px solid #ff4444; background: rgba(255,68,68,0.05);">
                    <h3 style="color: #ff4444;">üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π —Å–±—Ä–æ—Å –≤–∑–ª–æ–º—â–∏–∫–∞</h3>
                    <p style="font-size: 13px; opacity: 0.8; margin-bottom: 15px;">
                        –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è: –æ–±–Ω—É–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, **–∏–∑—ã–º–∞–µ—Ç –≤—Å–µ –ê–ó–°** –æ–±—Ä–∞—Ç–Ω–æ —Å–∏—Å—Ç–µ–º–µ –∏
                        **–±–∞–Ω–∏—Ç** –∏–≥—Ä–æ–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –≤–∑–ª–æ–º—â–∏–∫–æ–≤.
                    </p>
                    <div class="form-group">
                        <label>Telegram ID –≤–∑–ª–æ–º—â–∏–∫–∞:</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="emergency-target-id" placeholder="ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1288177696)"
                                style="flex: 2;">
                            <button onclick="emergencyResetUser()" class="danger-btn" style="flex: 1;">‚ò†Ô∏è –í –ë–ê–ù –ò
                                –ò–ó–™–Ø–¢–¨</button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ -->
            <div id="tab-support" class="tab-content">
                <div class="section-header">
                    <h2>üì® –°–æ–æ–±—â–µ–Ω–∏—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</h2>
                    <button onclick="loadSupportMessages()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–ò–≥—Ä–æ–∫ (ID)</th>
                                <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                                <th>–ú–µ–¥–∏–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="support-tbody">
                            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="tab-logs" class="tab-content">
                <div class="section-header">
                    <h2>–õ–æ–≥–∏ –æ—à–∏–±–æ–∫</h2>
                    <div>
                        <button onclick="loadLogs()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                        <button onclick="testLog()" style="background: #6a11cb;">üß™ –¢–µ—Å—Ç –ª–æ–≥–æ–≤</button>
                        <button class="danger-btn" onclick="clearLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                </div>
                <div class="logs-container" id="logs-container">
                    <!-- –õ–æ–≥–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞: –ù–æ–º–µ—Ä–∞ -->
            <div id="tab-plates" class="tab-content">
                <div class="section-header">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–Ω—ã–º–∏ –∑–Ω–∞–∫–∞–º–∏</h2>
                    <button onclick="loadAdminPlates()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                </div>
                <div class="table-container">
                    <table id="plates-table">
                        <thead>
                            <tr>
                                <th>–ù–æ–º–µ—Ä</th>
                                <th>–í–ª–∞–¥–µ–ª–µ—Ü</th>
                                <th>–†–µ–¥–∫–æ—Å—Ç—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–†—ã–Ω–æ–∫</th>
                            </tr>
                        </thead>
                        <tbody id="plates-tbody">
                            <!-- –ù–æ–º–µ—Ä–∞ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Å—é–¥–∞ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–∫–∞ <span id="edit-id"></span></h2>
            <form id="edit-form">
                <div class="form-group">
                    <label>–ë–∞–ª–∞–Ω—Å:</label>
                    <input type="number" step="0.01" id="edit-balance">
                </div>
                <div class="form-group">
                    <label>–£—Ä–æ–≤–µ–Ω—å:</label>
                    <input type="number" id="edit-level">
                </div>
                <div class="form-group">
                    <label>–û–ø—ã—Ç:</label>
                    <input type="number" id="edit-exp">
                </div>
                <div class="form-group">
                    <label>–¢–æ–ø–ª–∏–≤–æ:</label>
                    <input type="number" step="0.1" id="edit-fuel">
                </div>
                <div class="form-group">
                    <label>–°—Ç–∞–º–∏–Ω–∞:</label>
                    <input type="number" id="edit-stamina">
                </div>
                <div class="form-group">
                    <label>–°—É–Ω–¥—É–∫–∏ (Wooden/Silver/Gold/Leg):</label>
                    <div class="lootbox-inputs">
                        <input type="number" id="edit-lb-wooden" placeholder="W">
                        <input type="number" id="edit-lb-silver" placeholder="S">
                        <input type="number" id="edit-lb-gold" placeholder="G">
                        <input type="number" id="edit-lb-legendary" placeholder="L">
                    </div>
                </div>
                <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <button type="button" class="danger-btn"
                    style="margin-top: 20px; width: 100%; border: 2px solid #ff4444;" onclick="resetUserProgress()">‚ö†Ô∏è
                    –°–ë–†–û–°–ò–¢–¨ –í–ï–°–¨ –ü–†–û–ì–†–ï–°–°</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–≤–µ—Ç–∞ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É -->
    <div id="support-modal" class="modal">
        <div class="modal-content" style="width: 500px;">
            <span class="close" onclick="closeSupportModal()">&times;</span>
            <h2>–û—Ç–≤–µ—Ç –∏–≥—Ä–æ–∫—É <span id="support-user-display"></span></h2>
            <div id="support-chat-history"
                style="max-height: 300px; overflow-y: auto; margin-bottom: 20px; padding: 10px; background: #f9f9f9; border-radius: 8px;">
                <!-- –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ (–º–∏–Ω–∏) -->
            </div>
            <form id="support-reply-form">
                <input type="hidden" id="support-telegram-id">
                <div class="form-group">
                    <label>–í–∞—à –æ—Ç–≤–µ—Ç:</label>
                    <textarea id="support-reply-text" rows="5"
                        style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd;"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞..." required></textarea>
                </div>
                <button type="submit" style="width: 100%;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
    <div id="image-viewer-modal" class="modal">
        <span class="close" onclick="closeImageViewer()">&times;</span>
        <div class="modal-content">
            <img id="full-image-display" class="full-image">
        </div>
    </div>

    <script src="admin.js?v=3.5.1"></script>
</body>

</html>